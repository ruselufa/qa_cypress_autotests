# Инструкция по запуску автотестов

## Установка зависимостей
```bash
npm install
```

## Запуск тестов

### 1. Открыть Cypress Test Runner (рекомендуется для разработки)
```bash
npm run cypress:open
```
Это откроет графический интерфейс Cypress, где вы сможете:
- Выбрать браузер для запуска тестов
- Запускать тесты по одному или все сразу
- Видеть результаты в реальном времени

### 2. Запуск всех тестов в headless режиме
```bash
npm run cypress:run
```

### 3. Запуск конкретного теста
```bash
# Тесты для login.qa.studio
npx cypress run --spec "cypress/e2e/login.cy.js"

# Тест для pokemonbattle.ru
npx cypress run --spec "cypress/e2e/pokemon.cy.js"

# Простой тест проверки доступности
npx cypress run --spec "cypress/e2e/simple.cy.js"
```

## Описание тестов

### Тесты для login.qa.studio (login.cy.js)
1. **Позитивный кейс авторизации** - успешная авторизация с правильными данными
2. **Восстановление пароля** - проверка функционала восстановления пароля
3. **Негативный кейс - неправильный пароль** - ошибка при неверном пароле
4. **Негативный кейс - неправильный логин** - ошибка при неверном логине
5. **Валидация email** - ошибка при отсутствии @ в email
6. **Приведение к строчным буквам** - проверка бага с регистром букв (должен упасть)

### E2E тест для pokemonbattle.ru (pokemon.cy.js)
Сквозной тест покупки аватара:
- Авторизация
- Переход к смене аватара
- Выбор доступного аватара
- Заполнение данных карты
- Подтверждение покупки

## Важные замечания

1. **Для тестов покемонов**: Замените `USER_LOGIN` и `USER_PASSWORD` на реальные данные в файле `pokemon.cy.js`

2. **Тест с приведением к строчным буквам**: Должен упасть, так как это известный баг разработчика

3. **Проблемы с антивирусом**: Если возникают ошибки при запуске тестов покемонов, отключите антивирус или используйте браузер Electron

4. **Браузеры**: Cypress поддерживает Chrome, Firefox, Edge и Electron

## Структура проекта
```
cypress/
├── e2e/                    # Тесты
│   ├── login.cy.js        # Тесты авторизации
│   ├── pokemon.cy.js      # E2E тест покемонов
│   └── simple.cy.js       # Простой тест
├── fixtures/              # Тестовые данные
└── support/               # Поддержка
    ├── commands.js        # Кастомные команды
    └── e2e.js            # Конфигурация
```

## Отладка
Если тесты не проходят:
1. Проверьте доступность сайтов
2. Убедитесь, что селекторы элементов корректны
3. Проверьте, что все необходимые элементы присутствуют на странице
4. Используйте `cy.pause()` для остановки выполнения теста в определенной точке
